import"./modulepreload-polyfill-B5Qt9EMX.js";var u=16,r=4,o=4;class p{_value;possibilities;constructor(t){this.value=t||void 0}set value(t){this._value=t,this.possibilities=[]}get value(){return this._value}}function a(n){return t=>t.possibilities.indexOf(n)>-1}function c(n){return t=>t.value===n}class f{code;cells;$timeout;constructor(t){function e(i){return new p(i)}this.$timeout=t,this.code="code is generated when you click the solve button",this.cells=[];for(let i=0;i<u;i++){let s=[];for(let l=0;l<u;l++)s.push(e());this.cells.push(s)}this.cells=[[13,5,0,0,10,0,11,3,0,15,0,8,0,0,0,0],[16,0,0,0,0,0,0,9,0,0,13,0,0,6,0,0],[8,11,3,2,0,0,0,0,0,5,0,0,13,0,4,14],[0,0,6,10,0,15,0,0,0,0,0,14,0,2,0,0],[0,0,0,12,6,0,1,0,13,0,0,11,7,0,0,9],[6,2,16,1,0,0,5,0,0,0,0,9,3,0,0,15],[3,0,0,0,0,12,2,14,0,6,0,0,0,0,16,0],[7,0,0,0,11,3,0,8,0,0,0,0,14,10,0,2],[15,0,2,5,0,0,0,0,9,0,7,13,0,0,0,10],[0,4,0,0,0,0,6,0,12,1,14,0,0,0,0,13],[1,0,0,7,16,0,0,0,0,8,0,0,6,4,5,12],[9,0,0,13,2,0,0,7,0,11,0,4,16,0,0,0],[0,0,1,0,5,0,0,0,0,0,12,0,11,8,0,0],[2,12,0,11,0,0,14,0,0,0,0,0,15,1,13,6],[0,0,9,0,0,8,0,0,6,0,0,0,0,0,0,16],[0,0,0,0,15,0,4,0,8,14,0,7,0,0,9,5]],this.cells=this.cells.map(i=>i.map(e))}generateCode(){function t(i,s,l){return i>0&&i%s===0?l:""}function e(i,s,l){let h=i+"";return(s+"").replace(/./g,l).slice(h.length)+h}return`this.cells = [
`+this.cells.map((i,s)=>t(s,o,`
`)+"  ["+i.map((l,h)=>`${t(h,r,"/**/ ")}${e(l.value||"0",u," ")}`).join(", ")+"]").join(`,
`)+`
];

`}getStyle(t,e){function i(s){return`border-${s}: solid black 3px; `}return(t%o===0?i("top"):"")+(t%o===o-1?i("bottom"):"")+(e%r===0?i("left"):"")+(e%r===r-1?i("right"):"")}getBox(t,e){let i=[];t-=t%o,e-=e%r;for(let s=0;s<o;s++)i=i.concat(this.cells[t+s].slice(e,e+r));return i}getRow(t){return this.cells[t]}getCol(t){return this.cells.map(e=>e[t])}getAll(){return this.cells.reduce((t,e)=>t.concat(e),[])}someUnsolvedCell(t){return this.cells.some((e,i)=>e.some((s,l)=>!s.value&&t(s,i,l)))}forEachUnsolvedCell(t){this.cells.forEach((e,i)=>{e.forEach((s,l)=>{s.value||t(s,i,l)})})}isInRow(t,e){return this.getRow(t).filter(c(e)).length>0}isInCol(t,e){return this.getCol(t).filter(c(e)).length>0}isInBox(t,e,i){return this.getBox(t,e).filter(c(i)).length>0}otherOptionInRow(t,e){return this.getRow(t).filter(a(e)).length>1}otherOptionInCol(t,e){return this.getCol(t).filter(a(e)).length>1}otherOptionInBox(t,e,i){return this.getBox(t,e).filter(a(i)).length>1}getPossibleValues(t,e){let i=[];for(let s=1;s<=u;s++)!this.isInRow(t,s)&&!this.isInCol(e,s)&&!this.isInBox(t,e,s)&&i.push(s);return i}otherOptionInTable(t,e,i){return this.otherOptionInRow(t,i)&&this.otherOptionInCol(e,i)&&this.otherOptionInBox(t,e,i)}solveByOnlyPossibility(){return this.someUnsolvedCell((t,e,i)=>{if(t.possibilities.length===1)return t.value=t.possibilities[0],!0})}solveByNoOtherOptionInTable(){return this.someUnsolvedCell((t,e,i)=>{let s=t.possibilities.filter(l=>!this.otherOptionInTable(e,i,l));if(s.length===1)return t.value=s[0],!0})}solve(t){t&&(this.code=this.generateCode()),this.forEachUnsolvedCell((e,i,s)=>{e.possibilities=this.getPossibleValues(i,s)}),this.solveByOnlyPossibility()||this.solveByNoOtherOptionInTable()?this.$timeout(()=>this.solve(),10):this.getAll().filter(e=>!e.value).length>0?this.$timeout(()=>alert("stuck!!!"),0):this.$timeout(()=>alert("done!!!"),0)}}f.$inject=["$timeout"];angular.module("sodukuApp",[]).controller("MainController",f);
