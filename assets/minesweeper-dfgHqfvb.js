import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */const s={LOST:"lost",WON:"won",PLAYING:"playing"};function p(n){return Math.floor(Math.random()*n)}function N(n,t,l){function r(c,m){return c.some(function(h){return angular.equals(h,m)})}for(var f=[];f.length!==l;){var o={row:p(n),column:p(t)};r(f,o)||f.push(o)}return f}function O(n,t){return{count:0,mine:!1,revealed:!1,flagged:!1,coord:n,$autoReveal:function(){this.revealed&&(t||angular.noop)(this,!0)},$reveal:function(){!this.revealed&&!this.flagged&&(this.revealed=!0,(t||angular.noop)(this))},$flag:function(){this.revealed||(this.flagged=!this.flagged)},$displayValue:function(){return this.mine?"*":this.count?this.count:""}}}function E(n,t,l){var r,f=this;function o(e){var i=[];function a(v,u){var g=e.row+v,d=e.column+u;r[g]&&r[g][d]&&i.push(r[g][d])}return a(-1,-1),a(-1,0),a(-1,1),a(0,-1),a(0,1),a(1,-1),a(1,0),a(1,1),i}function c(){return r.reduce(function(e,i){return e.concat(i)},[])}function m(){c().forEach(function(e){e.revealed=!0})}function h(e){f.state=e,m()}function C(e,i){if(e.mine){h(s.LOST);return}if(i){var a=o(e.coord);a.filter(function(u){return u.flagged}).length>=e.count&&a.forEach(function(u){u.$reveal()})}else e.count===0&&o(e.coord).forEach(function(u){u.$reveal()});var v=c().every(function(u){return u.revealed||u.mine});v&&h(s.WON)}function P(){N(n,t,l).forEach(function(e){r[e.row][e.column].mine=!0,o(e).forEach(function(i){i.count++})})}function A(){r=[];for(var e=0;e<n;e++){r.push([]);for(var i=0;i<t;i++)r[e].push(new O({row:e,column:i},C))}}A(),P(),this.game=r,this.state=s.PLAYING}function w(n){n.parameters={rows:10,columns:10,mines:15},n.dismissPopup=function(){n.showPopup=!1},n.restart=function(){n.endMessage=null,n.showPopup=!1,n.minefield=new E(parseInt(n.parameters.rows),parseInt(n.parameters.columns),parseInt(n.parameters.mines))},n.$watch("minefield.state",function(t){n.$evalAsync(function(){t===s.LOST?(n.endMessage="You Lost!",n.showPopup=!0):t===s.WON&&(n.endMessage="You Won!",n.showPopup=!0)})}),n.restart()}w.$inject=["$scope"];function M(n){return{restrict:"A",link:function(t,l,r){var f=n(r.onContextmenu);l.on("contextmenu",function(o){t.$apply(function(){o.preventDefault(),f(t,{$event:o})})})}}}M.$inject=["$parse"];angular.module("minesweeperApp",[]).controller("MinesweeperCtrl",w).directive("onContextmenu",M);
